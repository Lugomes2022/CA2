<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="WEB DEV CA2" content="" />
        <meta name="Lucas Gabriel" content="" />
        <title>WebDev CA2</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.js"></script>
        <script>
            function reply_click(clicked_object)
                {
                    var sql = clicked_object.getAttribute('data-sql');
                    editor.setValue(sql);
                }
        </script>
    </head>
    <body>
        <!-- Responsive navbar-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="#">WebDev CA2</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item"><a class="nav-link " href="Part 1.1.html">Part 1.1</a></li>
                        <li class="nav-item"><a class="nav-link" href="Part 1.2.html">Part 1.2</a></li>
                        <li class="nav-item"><a class="nav-link active" aria-current="page" href="Part1.3.html">Part 1.3</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Page content-->
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center mt-5">
                    <h1>CA2: Data Manipulation & Validation</h1>
                    <p class="lead">This is Part 1.3</p>
                </div>
                <div class="col-lg-2 order-1 mb-3 d-flex flex-column gap-2 mx-auto align-items-stretch">
<button name="1.3.1" class="btn btn-success btn-block" data-sql="SELECT e.gender,count(1) as num_empGender,d.dept_name,d.dept_id FROM employees e INNER JOIN dept_manager de on (e.emp_id = de.emp_id) INNER JOIN departments d on  (de.dept_id = d.dept_id) WHERE de.to_date = '9999-01-01' GROUP BY e.gender, d.dept_name, d.dept_id ORDER BY d.dept_id ASC LIMIT 100;" onClick="reply_click(this)">1- List the number of male managers and female managers who work for each department. Make sure to
    display the gender, the number of employees (renamed as num_empGender) and dept_no, ordered by
    department number in an ascendant order. </button>
<button name="1.3.2" class="btn btn-success btn-block" data-sql="SELECT avg(s.salary) as avg_salary, e.gender, title FROM employees e INNER JOIN salaries s on (e.emp_id = s.emp_id) INNER JOIN titles t on (e.emp_id = t.emp_id) WHERE t.title = 'Technique Leader' GROUP BY e.gender, t.title LIMIT 100;" onClick="reply_click(this)">2- List the average salary of males and females employees whose title is "Technique Leader". In your
    result table should appear, gender, average salary named as avg_salary and title. 
                        have had.</button>
<button name="1.3.3" class="btn btn-success btn-block" data-sql="SELECT count(1)
FROM salaries s WHERE s.to_date = '9999-01-01' AND s.salary between 90000 and 90040 LIMIT 100;" onClick="reply_click(this)">3- The number of employees that have a current salary (i.e., to_date equals to 9999-01-01) between
    90000 and 90040.</button>
<button name="1.3.4-" class="btn btn-success btn-block" data-sql="SELECT e.first_name,e.last_name, s.salary FROM employees e INNER JOIN salaries s ON (e.emp_id = s.emp_id) WHERE s.to_date = '9999-01-01' AND s.salary > '90000' GROUP BY e.first_name, e.last_name, s.salary ORDER BY e.last_name DESC, e.first_name desc LIMIT 100;" onClick="reply_click(this)">4- List all unique employees last and first names (using GROUP BY method) that have a current salary
    (i.e., to_date equals to 9999-01-01) greater than 90000, outputting both names in descending order
    (sort by the last name first and then the first name) and also displaying their current salaries (using the
    INNER JOIN method)..</button>
<button name="1.3.5 " class="btn btn-success btn-block" data-sql="SELECT EM.first_name, EM.last_name, SA.from_date,SA.to_date,SA.salary  FROM employees EM  INNER JOIN salaries SA ON EM.emp_id=SA.emp_id  WHERE EM.emp_id='10012';" onClick="reply_click(this)">5 - First name, last name, all salary dates and related amounts for the employee with employee number
    10012.
                        Use a column alias total with B to output your results.
                        first name and last name in alphabetical order.</button>
<button name="1.3.6-" class="btn btn-success btn-block" data-sql="" onClick="reply_click(this)">6- a) What is the degree of this table?
    b) What column(s), if any, make(s) up the primary key?
    c) What column(s), if any, make(s) up the foreign key?
                            .</button>
<button name="1.3.7-" class="btn btn-success btn-block" data-sql="INSERT INTO emp_training, (trainer_no,first_name,last_name,t_module) VALUES (default, FRED,BLOGGS,GOOGLE SHEETS) (default,JOE,BLOGGS,GOOGLE DOCS);" onClick="reply_click(this)">7- In the given schema, the tables dept_emp, dept_manager, salaries, titles have composite keys.
    Explain for each relation why this is the case?</button>


                </div>
                <div class="col-lg-10 order-2 border-success">
                    <textarea id="commands" class="mb-5">TEXT
                    </textarea>
                    <div class="d-grid gap-2 mt-2 mb-1">
                        <button class="btn btn-primary" type="button" id="execute">Execute</button>
                            <input type="file" class="form-control" id="dbfile" />
                    </div>
                    <div id="error" class="error"></div>
                    <pre id="output">Results will be displayed here</pre>
                </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/mode/sql/sql.min.js"></script>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script type="text/javascript" src="js/gui.js"></script>
    </body>
</html>
